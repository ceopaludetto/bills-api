{"version":3,"file":"server.c1de8f5530f8a81d97be.hot-update.js","sources":["webpack://bills_api/./src/modules/authentication/authentication.guard.ts","webpack://bills_api/webpack/runtime/getFullHash"],"sourcesContent":["\"use strict\";\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.GqlAuthenticationGuard = void 0;\nconst common_1 = require(\"@nestjs/common\");\nconst graphql_1 = require(\"@nestjs/graphql\");\nconst jwt_1 = require(\"@nestjs/jwt\");\nconst passport_1 = require(\"@nestjs/passport\");\nconst passport_jwt_1 = require(\"passport-jwt\");\nlet GqlAuthenticationGuard = class GqlAuthenticationGuard extends (0, passport_1.AuthGuard)(\"jwt\") {\n    jwtService;\n    constructor(jwtService) {\n        super();\n        this.jwtService = jwtService;\n    }\n    getRequest(context) {\n        const { req } = graphql_1.GqlExecutionContext.create(context).getContext();\n        return req;\n    }\n    async canActivate(context) {\n        const request = this.getRequest(context);\n        const token = passport_jwt_1.ExtractJwt.fromAuthHeaderAsBearerToken()(request);\n        if (!token)\n            throw new common_1.UnauthorizedException(\"token-not-found\");\n        try {\n            await this.jwtService.verifyAsync(token);\n        }\n        catch (error) {\n            console.error(error);\n        }\n        return super.canActivate(context);\n    }\n};\nGqlAuthenticationGuard = __decorate([\n    (0, common_1.Injectable)(),\n    __metadata(\"design:paramtypes\", [typeof (_a = typeof jwt_1.JwtService !== \"undefined\" && jwt_1.JwtService) === \"function\" ? _a : Object])\n], GqlAuthenticationGuard);\nexports.GqlAuthenticationGuard = GqlAuthenticationGuard;\n","__webpack_require__.h = () => (\"7d22784f4a398f5ed0cf\")"],"mappings":";;;;;;;;;;;AAAA;AACA;;;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAEA;AACA;AACA;AAFA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AACA;AACA;AAvBA;AAwBA;AAIA;;A;;;;;;;;;ACrCA;;;;A","sourceRoot":""}