{"version":3,"file":"server.9fe8216bbfefbbcebde9.hot-update.js","sources":["webpack://bills_api/./src/modules/authentication/authentication.resolver.ts","webpack://bills_api/webpack/runtime/getFullHash"],"sourcesContent":["\"use strict\";\nvar _a, _b, _c, _d, _e;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AuthenticationResolver = void 0;\nconst common_1 = require(\"@nestjs/common\");\nconst graphql_1 = require(\"@nestjs/graphql\");\nconst passport_jwt_1 = require(\"passport-jwt\");\nconst models_1 = require(\"@/models\");\nconst user_1 = require(\"@/modules/user\");\nconst authentication_decorator_1 = require(\"./authentication.decorator\");\nconst authentication_dto_1 = require(\"./authentication.dto\");\nconst authentication_guard_1 = require(\"./authentication.guard\");\nconst authentication_service_1 = require(\"./authentication.service\");\nlet AuthenticationResolver = class AuthenticationResolver {\n    authenticationService;\n    userService;\n    constructor(authenticationService, userService) {\n        this.authenticationService = authenticationService;\n        this.userService = userService;\n    }\n    async profile(user) {\n        return this.userService.findByID(user.id);\n    }\n    async login(data, { res }) {\n        return this.authenticationService.login(data, res);\n    }\n    async register(data, { res }) {\n        return this.authenticationService.register(data, res);\n    }\n    async checkToken({ req }) {\n        const token = passport_jwt_1.ExtractJwt.fromAuthHeaderAsBearerToken()(req);\n        if (!token)\n            throw new common_1.UnauthorizedException(\"token-not-found\");\n        return this.authenticationService.checkToken(token);\n    }\n};\n__decorate([\n    (0, common_1.UseGuards)(authentication_guard_1.GqlAuthenticationGuard),\n    (0, graphql_1.Query)(() => models_1.User),\n    __param(0, (0, authentication_decorator_1.CurrentUser)()),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", [typeof (_a = typeof models_1.User !== \"undefined\" && models_1.User) === \"function\" ? _a : Object]),\n    __metadata(\"design:returntype\", Promise)\n], AuthenticationResolver.prototype, \"profile\", null);\n__decorate([\n    (0, graphql_1.Mutation)(() => models_1.User),\n    __param(0, (0, graphql_1.Args)(\"input\")),\n    __param(1, (0, graphql_1.Context)()),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", [typeof (_b = typeof authentication_dto_1.AuthenticationLoginInput !== \"undefined\" && authentication_dto_1.AuthenticationLoginInput) === \"function\" ? _b : Object, Object]),\n    __metadata(\"design:returntype\", Promise)\n], AuthenticationResolver.prototype, \"login\", null);\n__decorate([\n    (0, graphql_1.Mutation)(() => models_1.User),\n    __param(0, (0, graphql_1.Args)(\"input\")),\n    __param(1, (0, graphql_1.Context)()),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", [typeof (_c = typeof authentication_dto_1.AuthenticationRegisterInput !== \"undefined\" && authentication_dto_1.AuthenticationRegisterInput) === \"function\" ? _c : Object, Object]),\n    __metadata(\"design:returntype\", Promise)\n], AuthenticationResolver.prototype, \"register\", null);\n__decorate([\n    (0, common_1.UseGuards)(authentication_guard_1.GqlAuthenticationGuard),\n    (0, graphql_1.Query)(() => Boolean),\n    __param(0, (0, graphql_1.Context)()),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", [Object]),\n    __metadata(\"design:returntype\", Promise)\n], AuthenticationResolver.prototype, \"checkToken\", null);\nAuthenticationResolver = __decorate([\n    (0, graphql_1.Resolver)(() => models_1.User),\n    __metadata(\"design:paramtypes\", [typeof (_d = typeof authentication_service_1.AuthenticationService !== \"undefined\" && authentication_service_1.AuthenticationService) === \"function\" ? _d : Object, typeof (_e = typeof user_1.UserService !== \"undefined\" && user_1.UserService) === \"function\" ? _e : Object])\n], AuthenticationResolver);\nexports.AuthenticationResolver = AuthenticationResolver;\n","__webpack_require__.h = () => (\"45b7bcf715a8df2e8e35\")"],"mappings":";;;;;;;;;;;AAAA;AACA;;;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAGA;AAAA;AACA;AADA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AACA;AAtBA;AACA;AAsBA;AACA;AAOA;AACA;AAOA;AACA;AAOA;AACA;AAOA;AAIA;;A;;;;;;;;;ACxEA;;;;A","sourceRoot":""}