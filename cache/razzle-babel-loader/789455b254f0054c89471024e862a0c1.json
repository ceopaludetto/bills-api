{"ast":null,"code":"\"use strict\";\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AuthenticationService = void 0;\n\nconst common_1 = require(\"@nestjs/common\");\n\nlet AuthenticationService = class AuthenticationService {\n  constructor(userService) {\n    _defineProperty(this, \"userService\", void 0);\n\n    this.userService = userService;\n  }\n\n  async validatePayload(payload) {\n    const user = await this.userService.findByID(payload.id);\n    if (!user) throw new common_1.NotFoundException(\"user-not-found\");\n    if (user.email !== payload.email) throw new common_1.UnprocessableEntityException(\"email-mismatch\");\n    return user;\n  }\n\n};\nAuthenticationService = __decorate([(0, common_1.Injectable)(), __metadata(\"design:paramtypes\", [Object])], AuthenticationService);\nexports.AuthenticationService = AuthenticationService;","map":{"version":3,"sources":["/Users/carlos/Documents/Projetos/Javascript/bills_api/src/modules/authentication/authentication.service.ts"],"names":["Object","defineProperty","exports","value","AuthenticationService","common_1","require","constructor","userService","validatePayload","payload","user","findByID","id","NotFoundException","email","UnprocessableEntityException","__decorate","Injectable","__metadata"],"mappings":"AAAA;;;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,qBAAR,GAAgC,KAAK,CAArC;;AACA,MAAMC,QAAQ,GAAGC,OAAO,CAAC,gBAAD,CAAxB;;AACA,IAAIF,qBAAqB,GAAG,MAAMA,qBAAN,CAA4B;AAEpDG,EAAAA,WAAW,CAACC,WAAD,EAAc;AAAA;;AACrB,SAAKA,WAAL,GAAmBA,WAAnB;AACH;;AACoB,QAAfC,eAAe,CAACC,OAAD,EAAU;AAC3B,UAAMC,IAAI,GAAG,MAAM,KAAKH,WAAL,CAAiBI,QAAjB,CAA0BF,OAAO,CAACG,EAAlC,CAAnB;AACA,QAAI,CAACF,IAAL,EACI,MAAM,IAAIN,QAAQ,CAACS,iBAAb,CAA+B,gBAA/B,CAAN;AACJ,QAAIH,IAAI,CAACI,KAAL,KAAeL,OAAO,CAACK,KAA3B,EACI,MAAM,IAAIV,QAAQ,CAACW,4BAAb,CAA0C,gBAA1C,CAAN;AACJ,WAAOL,IAAP;AACH;;AAZmD,CAAxD;AAcAP,qBAAqB,GAAGa,UAAU,CAAC,CAC/B,CAAC,GAAGZ,QAAQ,CAACa,UAAb,GAD+B,EAE/BC,UAAU,CAAC,mBAAD,EAAsB,CAACnB,MAAD,CAAtB,CAFqB,CAAD,EAG/BI,qBAH+B,CAAlC;AAIAF,OAAO,CAACE,qBAAR,GAAgCA,qBAAhC","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AuthenticationService = void 0;\nconst common_1 = require(\"@nestjs/common\");\nlet AuthenticationService = class AuthenticationService {\n    userService;\n    constructor(userService) {\n        this.userService = userService;\n    }\n    async validatePayload(payload) {\n        const user = await this.userService.findByID(payload.id);\n        if (!user)\n            throw new common_1.NotFoundException(\"user-not-found\");\n        if (user.email !== payload.email)\n            throw new common_1.UnprocessableEntityException(\"email-mismatch\");\n        return user;\n    }\n};\nAuthenticationService = __decorate([\n    (0, common_1.Injectable)(),\n    __metadata(\"design:paramtypes\", [Object])\n], AuthenticationService);\nexports.AuthenticationService = AuthenticationService;\n"]},"metadata":{},"sourceType":"script"}