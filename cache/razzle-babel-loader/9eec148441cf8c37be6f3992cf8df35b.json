{"ast":null,"code":"\"use strict\";\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar _a;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.JwtStrategy = void 0;\n\nconst common_1 = require(\"@nestjs/common\");\n\nconst passport_1 = require(\"@nestjs/passport\");\n\nconst passport_jwt_1 = require(\"passport-jwt\");\n\nconst authentication_service_1 = require(\"../authentication.service\");\n\nlet JwtStrategy = class JwtStrategy extends (0, passport_1.PassportStrategy)(passport_jwt_1.Strategy) {\n  constructor(configService, authenticationService) {\n    super({\n      jwtFromRequest: passport_jwt_1.ExtractJwt.fromAuthHeaderAsBearerToken(),\n      ignoreExpiration: false,\n      secretOrKey: configService.get(\"AUTH_SECRET\")\n    });\n\n    _defineProperty(this, \"authenticationService\", void 0);\n\n    this.authenticationService = authenticationService;\n  }\n\n  async validate(payload) {\n    return this.authenticationService.validatePayload(payload);\n  }\n\n};\nJwtStrategy = __decorate([(0, common_1.Injectable)(), __metadata(\"design:paramtypes\", [Object, typeof (_a = typeof authentication_service_1.AuthenticationService !== \"undefined\" && authentication_service_1.AuthenticationService) === \"function\" ? _a : Object])], JwtStrategy);\nexports.JwtStrategy = JwtStrategy;","map":{"version":3,"sources":["/Users/carlos/Documents/Projetos/Javascript/bills_api/src/modules/authentication/strategies/jwt.strategy.ts"],"names":["_a","Object","defineProperty","exports","value","JwtStrategy","common_1","require","passport_1","passport_jwt_1","authentication_service_1","PassportStrategy","Strategy","constructor","configService","authenticationService","jwtFromRequest","ExtractJwt","fromAuthHeaderAsBearerToken","ignoreExpiration","secretOrKey","get","validate","payload","validatePayload","__decorate","Injectable","__metadata","AuthenticationService"],"mappings":"AAAA;;;;AACA,IAAIA,EAAJ;;AACAC,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,WAAR,GAAsB,KAAK,CAA3B;;AACA,MAAMC,QAAQ,GAAGC,OAAO,CAAC,gBAAD,CAAxB;;AACA,MAAMC,UAAU,GAAGD,OAAO,CAAC,kBAAD,CAA1B;;AACA,MAAME,cAAc,GAAGF,OAAO,CAAC,cAAD,CAA9B;;AACA,MAAMG,wBAAwB,GAAGH,OAAO,CAAC,2BAAD,CAAxC;;AACA,IAAIF,WAAW,GAAG,MAAMA,WAAN,SAA0B,CAAC,GAAGG,UAAU,CAACG,gBAAf,EAAiCF,cAAc,CAACG,QAAhD,CAA1B,CAAoF;AAElGC,EAAAA,WAAW,CAACC,aAAD,EAAgBC,qBAAhB,EAAuC;AAC9C,UAAM;AACFC,MAAAA,cAAc,EAAEP,cAAc,CAACQ,UAAf,CAA0BC,2BAA1B,EADd;AAEFC,MAAAA,gBAAgB,EAAE,KAFhB;AAGFC,MAAAA,WAAW,EAAEN,aAAa,CAACO,GAAd,CAAkB,aAAlB;AAHX,KAAN;;AAD8C;;AAM9C,SAAKN,qBAAL,GAA6BA,qBAA7B;AACH;;AACa,QAARO,QAAQ,CAACC,OAAD,EAAU;AACpB,WAAO,KAAKR,qBAAL,CAA2BS,eAA3B,CAA2CD,OAA3C,CAAP;AACH;;AAZiG,CAAtG;AAcAlB,WAAW,GAAGoB,UAAU,CAAC,CACrB,CAAC,GAAGnB,QAAQ,CAACoB,UAAb,GADqB,EAErBC,UAAU,CAAC,mBAAD,EAAsB,CAAC1B,MAAD,EAAS,QAAQD,EAAE,GAAG,OAAOU,wBAAwB,CAACkB,qBAAhC,KAA0D,WAA1D,IAAyElB,wBAAwB,CAACkB,qBAA/G,MAA0I,UAA1I,GAAuJ5B,EAAvJ,GAA4JC,MAArK,CAAtB,CAFW,CAAD,EAGrBI,WAHqB,CAAxB;AAIAF,OAAO,CAACE,WAAR,GAAsBA,WAAtB","sourcesContent":["\"use strict\";\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.JwtStrategy = void 0;\nconst common_1 = require(\"@nestjs/common\");\nconst passport_1 = require(\"@nestjs/passport\");\nconst passport_jwt_1 = require(\"passport-jwt\");\nconst authentication_service_1 = require(\"../authentication.service\");\nlet JwtStrategy = class JwtStrategy extends (0, passport_1.PassportStrategy)(passport_jwt_1.Strategy) {\n    authenticationService;\n    constructor(configService, authenticationService) {\n        super({\n            jwtFromRequest: passport_jwt_1.ExtractJwt.fromAuthHeaderAsBearerToken(),\n            ignoreExpiration: false,\n            secretOrKey: configService.get(\"AUTH_SECRET\"),\n        });\n        this.authenticationService = authenticationService;\n    }\n    async validate(payload) {\n        return this.authenticationService.validatePayload(payload);\n    }\n};\nJwtStrategy = __decorate([\n    (0, common_1.Injectable)(),\n    __metadata(\"design:paramtypes\", [Object, typeof (_a = typeof authentication_service_1.AuthenticationService !== \"undefined\" && authentication_service_1.AuthenticationService) === \"function\" ? _a : Object])\n], JwtStrategy);\nexports.JwtStrategy = JwtStrategy;\n"]},"metadata":{},"sourceType":"script"}