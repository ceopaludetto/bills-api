{"ast":null,"code":"\"use strict\";\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar _a;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AuthenticationService = void 0;\n\nconst common_1 = require(\"@nestjs/common\");\n\nconst user_1 = require(\"@/modules/user\");\n\nlet AuthenticationService = class AuthenticationService {\n  constructor(userService) {\n    _defineProperty(this, \"userService\", void 0);\n\n    this.userService = userService;\n  }\n\n  async validatePayload(payload) {\n    const user = await this.userService.findByID(payload.id);\n    if (!user) throw new common_1.NotFoundException(\"user-not-found\");\n    if (user.email !== payload.email) throw new common_1.UnprocessableEntityException(\"email-mismatch\");\n    return user;\n  }\n\n  async register(data) {}\n\n};\nAuthenticationService = __decorate([(0, common_1.Injectable)(), __metadata(\"design:paramtypes\", [typeof (_a = typeof user_1.UserService !== \"undefined\" && user_1.UserService) === \"function\" ? _a : Object])], AuthenticationService);\nexports.AuthenticationService = AuthenticationService;","map":{"version":3,"sources":["/Users/carlos/Documents/Projetos/Javascript/bills_api/src/modules/authentication/authentication.service.ts"],"names":["_a","Object","defineProperty","exports","value","AuthenticationService","common_1","require","user_1","constructor","userService","validatePayload","payload","user","findByID","id","NotFoundException","email","UnprocessableEntityException","register","data","__decorate","Injectable","__metadata","UserService"],"mappings":"AAAA;;;;AACA,IAAIA,EAAJ;;AACAC,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,qBAAR,GAAgC,KAAK,CAArC;;AACA,MAAMC,QAAQ,GAAGC,OAAO,CAAC,gBAAD,CAAxB;;AACA,MAAMC,MAAM,GAAGD,OAAO,CAAC,gBAAD,CAAtB;;AACA,IAAIF,qBAAqB,GAAG,MAAMA,qBAAN,CAA4B;AAEpDI,EAAAA,WAAW,CAACC,WAAD,EAAc;AAAA;;AACrB,SAAKA,WAAL,GAAmBA,WAAnB;AACH;;AACoB,QAAfC,eAAe,CAACC,OAAD,EAAU;AAC3B,UAAMC,IAAI,GAAG,MAAM,KAAKH,WAAL,CAAiBI,QAAjB,CAA0BF,OAAO,CAACG,EAAlC,CAAnB;AACA,QAAI,CAACF,IAAL,EACI,MAAM,IAAIP,QAAQ,CAACU,iBAAb,CAA+B,gBAA/B,CAAN;AACJ,QAAIH,IAAI,CAACI,KAAL,KAAeL,OAAO,CAACK,KAA3B,EACI,MAAM,IAAIX,QAAQ,CAACY,4BAAb,CAA0C,gBAA1C,CAAN;AACJ,WAAOL,IAAP;AACH;;AACa,QAARM,QAAQ,CAACC,IAAD,EAAO,CAAG;;AAb4B,CAAxD;AAeAf,qBAAqB,GAAGgB,UAAU,CAAC,CAC/B,CAAC,GAAGf,QAAQ,CAACgB,UAAb,GAD+B,EAE/BC,UAAU,CAAC,mBAAD,EAAsB,CAAC,QAAQvB,EAAE,GAAG,OAAOQ,MAAM,CAACgB,WAAd,KAA8B,WAA9B,IAA6ChB,MAAM,CAACgB,WAAjE,MAAkF,UAAlF,GAA+FxB,EAA/F,GAAoGC,MAArG,CAAtB,CAFqB,CAAD,EAG/BI,qBAH+B,CAAlC;AAIAF,OAAO,CAACE,qBAAR,GAAgCA,qBAAhC","sourcesContent":["\"use strict\";\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AuthenticationService = void 0;\nconst common_1 = require(\"@nestjs/common\");\nconst user_1 = require(\"@/modules/user\");\nlet AuthenticationService = class AuthenticationService {\n    userService;\n    constructor(userService) {\n        this.userService = userService;\n    }\n    async validatePayload(payload) {\n        const user = await this.userService.findByID(payload.id);\n        if (!user)\n            throw new common_1.NotFoundException(\"user-not-found\");\n        if (user.email !== payload.email)\n            throw new common_1.UnprocessableEntityException(\"email-mismatch\");\n        return user;\n    }\n    async register(data) { }\n};\nAuthenticationService = __decorate([\n    (0, common_1.Injectable)(),\n    __metadata(\"design:paramtypes\", [typeof (_a = typeof user_1.UserService !== \"undefined\" && user_1.UserService) === \"function\" ? _a : Object])\n], AuthenticationService);\nexports.AuthenticationService = AuthenticationService;\n"]},"metadata":{},"sourceType":"script"}