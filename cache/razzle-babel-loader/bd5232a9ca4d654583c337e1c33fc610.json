{"ast":null,"code":"function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar _a, _b;\n\nimport { Injectable } from \"@nestjs/common\";\nimport { ConfigService } from \"@nestjs/config\";\nimport { PassportStrategy } from \"@nestjs/passport\";\nimport { ExtractJwt, Strategy } from \"passport-jwt\";\nimport { AuthenticationService } from \"../authentication.service\";\nlet JwtStrategy = class JwtStrategy extends PassportStrategy(Strategy) {\n  constructor(configService, authenticationService) {\n    super({\n      jwtFromRequest: ExtractJwt.fromAuthHeaderAsBearerToken(),\n      ignoreExpiration: false,\n      secretOrKey: configService.get(\"AUTH_SECRET\")\n    });\n\n    _defineProperty(this, \"authenticationService\", void 0);\n\n    this.authenticationService = authenticationService;\n  }\n\n  async validate(payload) {\n    return this.authenticationService.validatePayload(payload);\n  }\n\n};\nJwtStrategy = __decorate([Injectable(), __metadata(\"design:paramtypes\", [typeof (_a = typeof ConfigService !== \"undefined\" && ConfigService) === \"function\" ? _a : Object, typeof (_b = typeof AuthenticationService !== \"undefined\" && AuthenticationService) === \"function\" ? _b : Object])], JwtStrategy);\nexport { JwtStrategy };","map":{"version":3,"sources":["/Users/carlos/Documents/Projetos/Javascript/bills_api/src/modules/authentication/strategies/jwt.strategy.ts"],"names":["_a","_b","Injectable","ConfigService","PassportStrategy","ExtractJwt","Strategy","AuthenticationService","JwtStrategy","constructor","configService","authenticationService","jwtFromRequest","fromAuthHeaderAsBearerToken","ignoreExpiration","secretOrKey","get","validate","payload","validatePayload","__decorate","__metadata","Object"],"mappings":";;AAAA,IAAIA,EAAJ,EAAQC,EAAR;;AACA,SAASC,UAAT,QAA2B,gBAA3B;AACA,SAASC,aAAT,QAA8B,gBAA9B;AACA,SAASC,gBAAT,QAAiC,kBAAjC;AACA,SAASC,UAAT,EAAqBC,QAArB,QAAqC,cAArC;AACA,SAASC,qBAAT,QAAsC,2BAAtC;AACA,IAAIC,WAAW,GAAG,MAAMA,WAAN,SAA0BJ,gBAAgB,CAACE,QAAD,CAA1C,CAAqD;AAEnEG,EAAAA,WAAW,CAACC,aAAD,EAAgBC,qBAAhB,EAAuC;AAC9C,UAAM;AACFC,MAAAA,cAAc,EAAEP,UAAU,CAACQ,2BAAX,EADd;AAEFC,MAAAA,gBAAgB,EAAE,KAFhB;AAGFC,MAAAA,WAAW,EAAEL,aAAa,CAACM,GAAd,CAAkB,aAAlB;AAHX,KAAN;;AAD8C;;AAM9C,SAAKL,qBAAL,GAA6BA,qBAA7B;AACH;;AACa,QAARM,QAAQ,CAACC,OAAD,EAAU;AACpB,WAAO,KAAKP,qBAAL,CAA2BQ,eAA3B,CAA2CD,OAA3C,CAAP;AACH;;AAZkE,CAAvE;AAcAV,WAAW,GAAGY,UAAU,CAAC,CACrBlB,UAAU,EADW,EAErBmB,UAAU,CAAC,mBAAD,EAAsB,CAAC,QAAQrB,EAAE,GAAG,OAAOG,aAAP,KAAyB,WAAzB,IAAwCA,aAArD,MAAwE,UAAxE,GAAqFH,EAArF,GAA0FsB,MAA3F,EAAmG,QAAQrB,EAAE,GAAG,OAAOM,qBAAP,KAAiC,WAAjC,IAAgDA,qBAA7D,MAAwF,UAAxF,GAAqGN,EAArG,GAA0GqB,MAA7M,CAAtB,CAFW,CAAD,EAGrBd,WAHqB,CAAxB;AAIA,SAASA,WAAT","sourcesContent":["var _a, _b;\nimport { Injectable } from \"@nestjs/common\";\nimport { ConfigService } from \"@nestjs/config\";\nimport { PassportStrategy } from \"@nestjs/passport\";\nimport { ExtractJwt, Strategy } from \"passport-jwt\";\nimport { AuthenticationService } from \"../authentication.service\";\nlet JwtStrategy = class JwtStrategy extends PassportStrategy(Strategy) {\n    authenticationService;\n    constructor(configService, authenticationService) {\n        super({\n            jwtFromRequest: ExtractJwt.fromAuthHeaderAsBearerToken(),\n            ignoreExpiration: false,\n            secretOrKey: configService.get(\"AUTH_SECRET\"),\n        });\n        this.authenticationService = authenticationService;\n    }\n    async validate(payload) {\n        return this.authenticationService.validatePayload(payload);\n    }\n};\nJwtStrategy = __decorate([\n    Injectable(),\n    __metadata(\"design:paramtypes\", [typeof (_a = typeof ConfigService !== \"undefined\" && ConfigService) === \"function\" ? _a : Object, typeof (_b = typeof AuthenticationService !== \"undefined\" && AuthenticationService) === \"function\" ? _b : Object])\n], JwtStrategy);\nexport { JwtStrategy };\n"]},"metadata":{},"sourceType":"module"}